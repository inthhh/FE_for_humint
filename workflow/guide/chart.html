<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, height=device-height, viewport-fit=cover"
    />
    <title>Connect Workflow</title>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../assets/css/font.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/css/swiper.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/css/nice-select.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/css/daterangepicker.css"
    />
    <link rel="stylesheet" type="text/css" href="../html/css/common.css" />
    <link rel="stylesheet" type="text/css" href="../html/css/sub.css" />
    <link rel="stylesheet" type="text/css" href="../html/css/main.css" />
    <!-- 메인에만 노출 -->

    <!-- JS -->
    <script src="../assets/js/jquery-3.1.1.min.js"></script>
    <script src="../assets/js/delighters.js"></script>
    <script src="../assets/js/swiper.min.js"></script>
    <script src="../assets/js/jquery.nice-select.min.js"></script>
    <script src="../assets/js/numberCounting.js"></script>
    <script src="../assets/js/TweenMax.min.js"></script>
    <script src="../assets/js/moment.min.js"></script>
    <script src="../assets/js/daterangepicker.min.js"></script>
    <script src="../html/js/ui.js"></script>
    <script src="../html/js/page.js"></script>
    <script src="../assets/js/progressbar.js"></script>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Include Chart.js Datalabels plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  </head>

  <body>
    <nav data-include="nav.html"></nav>
    <div class="page-guide-content">
      <h2 class="page-guide-title">text</h2>

      <h3 class="page-guide-title2">Bar Chart</h3>

      <div style="width: 297px; height: 358px">
        <!--차트가 그려질 부분-->
        <canvas id="myChart"></canvas>
      </div>
      <h3 class="page-guide-title2">Doughnut Chart</h3>
      <div style="width: 297px; height: 358px">
        <!--차트가 그려질 부분-->
        <canvas id="myChart2"></canvas>
      </div>

      <h3 class="page-guide-title2">SEMICIRCLE Chart</h3>
      <div style="width: 297px; height: 358px">
        <!--차트가 그려질 부분-->
        <div id="semiCircle"></div>
      </div>

      <h3 class="page-guide-title2">LINE Chart</h3>
      <div style="width: 650px; height: 358px">
        <!--차트가 그려질 부분-->
        <canvas id="lineChart"></canvas>
      </div>

      <h3 class="page-guide-title2">EPIC TICKET Chart</h3>
      <div style="width: 650px; height: 358px">
        <!--차트가 그려질 부분-->
        <canvas id="epicChart"></canvas>
      </div>
    </div>
    <script>
      $(function () {
        const ctx = document.getElementById("myChart");
        const dataSet = [30, 10, 25, 8];

        const labels = ["보류", "진행 중", "재확인", "종료"];
        const datasets = {
          labels: labels,
          datasets: [
            {
              label: "프로젝트 진행 현황 ",
              data: dataSet,
              backgroundColor: [
                "rgba(211, 187, 254, 1)",
                "rgba(211, 187, 254, 1)",
                "rgba(110, 57, 203, 1)",
                "rgba(211, 187, 254, 1)",
              ],
              borderColor: [],
              borderWidth: 0,
              maxBarThickness: -10,
              minBarLength: 4,
            },
          ],
        };
        const config = {
          type: "bar",
          data: datasets,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "top",
                display: false,
              },
              title: {
                display: false,
                text: "프로젝트 진행 현황",
              },
            },
          },
        };

        const chart1 = new Chart(ctx, config);

        const ctx2 = document.getElementById("myChart2");

        const dataSet2 = [69, 31];

        const labels2 = ["초과", "준수"];
        const datasets2 = {
          labels: labels2,
          datasets: [
            {
              label: "마감일 초과 스토리 티켓",
              data: dataSet2,
              backgroundColor: [
                "rgba(110, 57, 203, 1)",
                "rgba(211, 187, 254, 1)",
              ],
              borderColor: [],
              borderWidth: 0,
              maxBarThickness: -10,
              minBarLength: 2,
            },
          ],
        };
        const config2 = {
          type: "doughnut",
          data: datasets2,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "top",
              },
              title: {
                display: true,
                text: "프로젝트 진행 현황",
              },
            },
          },
        };

        const myChart2 = new Chart(ctx2, config2);

        //////////////////////////////////////////////////////
        var bar = new ProgressBar.SemiCircle(semiCircle, {
          strokeWidth: 6,
          color: "#6E39CB",
          trailColor: "#D3BBFE",
          trailWidth: 6,
          easing: "easeInOut",
          duration: 1400,
          svgStyle: null,
          text: {
            value: "69",
            alignToBottom: false,
          },
          from: { color: "#6E39CB" },
          to: { color: "#6E39CB" },
          // Set default step function for all animate calls
          step: (state, bar) => {
            bar.path.setAttribute("stroke", state.color);
            var value = Math.round(bar.value() * 100);
            if (value === 0) {
              bar.setText("");
            } else {
              bar.setText(value);
            }

            bar.text.style.color = state.color;
          },
        });
        bar.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
        bar.text.style.fontSize = "2rem";

        bar.animate(0.69);
      });

      // LINE CHART!!
      const lineChart = document.getElementById("lineChart");

      new Chart(lineChart, {
        type: "line",
        data: {
          labels: [1, 2, 3, 4, 5, 6, 7],
          datasets: [
            {
              label: "My First Dataset",
              data: [65, 59, 80, 81, 56, 55, 40],
              fill: false,
              borderColor: "rgba(211, 187, 254, 1)",
              tension: 0.1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: "top",
              display: false,
            },
            title: {
              display: false,
            },
          },
        },
      });

      // EPIC !!
      const epicData = {
        labels: [
          "Person 1",
          "Person 2",
          "Person 3",
          "Person 4",
          "Person 5",
          "Person 6",
        ],
        datasets: [
          {
            label: "", // 레이블 숨기기
            data: [270, 220, 130, 240, 150, 260],
            backgroundColor: "#D3BBFE",
            borderColor: "#6E39CB",
            borderWidth: 1,
            barThickness: 8, // 막대의 가로 넓이
          },
        ],
      };

      const epicConfig = {
        type: "bar",
        data: epicData,
        options: {
          indexAxis: "x", // x축을 기준으로 막대 차트 표시
          elements: {
            bar: {
              borderRadius: 15,
            },
          },
          scales: {
            y: {
              beginAtZero: true,
            },
          },
          plugins: {
            legend: {
              display: false,
            },
            datalabels: {
              display: false,
            },
          },
        },
      };

      const epicChart = new Chart("epicChart", epicConfig);
    </script>
  </body>
</html>
